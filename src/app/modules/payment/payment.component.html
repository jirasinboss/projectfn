<div class="product-container1">
  <h2 class="cpp">ชำระเงิน</h2>
  <div *ngIf="cartItems.length > 0">
    <ul>
      <li *ngFor="let item of cartItems" class="product-item">
        <h3>{{ item.productName }}</h3>
        <div *ngFor="let img of item.imgList">
          <img [src]="img" alt="{{ item.productName }}" class="product-image">
        </div>
        <p>ประเภท: {{ item.productType[0]?.productTypeName }}</p>
        <p>ราคา: {{ item.price | currency:'THB' }}</p>
        <p>จำนวน: {{ item.quantity }}</p>
        <div class="qr-code-section">
          <div class="qr-code-container">
            <img [src]="getQRCodeImage(item.price)" alt="QR Code for {{ item.price }}" class="qr-code-image">
          </div>
          <div class="file-upload-section">
            <input type="file" (change)="onFileChange($event)" accept="image/*" />
            <button (click)="uploadFile()">Upload Slip</button>
            <div *ngIf="uploadedFileUrl" class="file-preview">
              <p>Uploaded File Preview:</p>
              <img [src]="uploadedFileUrl" alt="Uploaded Slip" class="product-image">
            </div>
          </div>
        </div>
        <!-- Address Input Section -->
        <div class="address-section">
          <h4>ที่อยู่จัดส่ง</h4>
          <div class="address-field">
            <label for="name">ชื่อ-นามสกุล:</label>
            <input type="text" id="name" [(ngModel)]="address.name" placeholder="Enter your name" />
          </div>
          <div class="address-field">
            <label for="address">ที่อยู่:</label>
            <textarea id="address" [(ngModel)]="address.address" placeholder="Enter your address here" rows="4" cols="50"></textarea>
          </div>
          <div class="address-field">
            <label for="phone">เบอร์โทรศัพท์:</label>
            <input type="text" id="phone" [(ngModel)]="address.phone" placeholder="Enter your phone number" />
          </div>
          <div class="address-field">
            <label for="postalCode">รหัสไปรษณีย์:</label>
            <input type="text" id="postalCode" [(ngModel)]="address.postalCode" placeholder="Enter your postal code" />
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div *ngIf="cartItems.length === 0">
    <p>No items in your order.</p>
  </div>
  <!-- Confirm Order Button -->
  <button class="confirm-order-button" (click)="confirmOrder()">Confirm Order</button>
</div>
